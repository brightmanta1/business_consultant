# Документация по ИИ-модели для бизнес-консалтинга

## Содержание
1. [Введение](#введение)
2. [Архитектура системы](#архитектура-системы)
3. [Компоненты системы](#компоненты-системы)
4. [Установка и развертывание](#установка-и-развертывание)
5. [API документация](#api-документация)
6. [Пользовательский интерфейс](#пользовательский-интерфейс)
7. [Модель ИИ](#модель-ии)
8. [Обслуживание и мониторинг](#обслуживание-и-мониторинг)
9. [Устранение неполадок](#устранение-неполадок)
10. [Часто задаваемые вопросы](#часто-задаваемые-вопросы)

## Введение

ИИ-модель для бизнес-консалтинга представляет собой интеллектуальную систему, разработанную для предоставления профессиональных консультаций в различных областях бизнеса. Система использует современные технологии искусственного интеллекта и машинного обучения для анализа бизнес-задач и предоставления обоснованных рекомендаций.

### Области консалтинга

Система предоставляет консультации в следующих областях:

- **Финансовый консалтинг** - консультации по финансовому планированию, бюджетированию, налогообложению и финансовому анализу.
- **Операционный консалтинг** - консультации по оптимизации бизнес-процессов, управлению цепочками поставок и операционной эффективности.
- **Управленческий консалтинг** - консультации по стратегическому управлению, организационному развитию и корпоративному управлению.
- **IT-консалтинг** - консультации по информационным технологиям, цифровой трансформации, разработке ПО и IT-инфраструктуре.
- **HR-консалтинг** - консультации по управлению персоналом, найму, обучению, развитию и удержанию сотрудников.
- **Инвестиционный консалтинг** - консультации по инвестициям, управлению активами, оценке инвестиционных возможностей и рисков.

### Технологии

Система разработана с использованием следующих технологий:

- **Python** - основной язык программирования
- **FastAPI** - фреймворк для разработки API
- **PyTorch** - библиотека для машинного обучения
- **Transformers** - библиотека для работы с трансформерными моделями
- **Docker** - платформа для контейнеризации
- **Bootstrap** - фреймворк для разработки пользовательского интерфейса
- **JavaScript** - язык программирования для клиентской части

## Архитектура системы

Система построена на основе микросервисной архитектуры и состоит из следующих компонентов:

1. **Модель ИИ** - ядро системы, отвечающее за обработку запросов и генерацию ответов.
2. **API** - интерфейс для взаимодействия с моделью ИИ.
3. **Веб-интерфейс** - пользовательский интерфейс для взаимодействия с системой.
4. **Система кэширования** - для оптимизации производительности.
5. **Система мониторинга** - для отслеживания работы системы.

### Диаграмма архитектуры

```
+------------------+     +------------------+     +------------------+
|                  |     |                  |     |                  |
|  Веб-интерфейс   +---->+       API        +---->+    Модель ИИ     |
|                  |     |                  |     |                  |
+------------------+     +------------------+     +------------------+
                                 |
                                 v
                         +------------------+
                         |                  |
                         |      Кэш         |
                         |                  |
                         +------------------+
```

## Компоненты системы

### Модель ИИ

Модель ИИ построена на основе трансформерной архитектуры и обучена на большом объеме данных из различных источников. Модель использует технику transfer learning и доменные адаптеры для специализации в различных областях консалтинга.

Основные компоненты модели:
- Базовая модель (DeepPavlov/rubert-base-cased)
- Доменные адаптеры для каждой области консалтинга
- Студенческая модель (опционально)

### API

API построен на основе FastAPI и предоставляет следующие эндпоинты:

- `/api/consulting` - общий эндпоинт для получения консультации в любой области
- `/api/financial` - эндпоинт для финансового консалтинга
- `/api/operations` - эндпоинт для операционного консалтинга
- `/api/management` - эндпоинт для управленческого консалтинга
- `/api/it` - эндпоинт для IT-консалтинга
- `/api/hr` - эндпоинт для HR-консалтинга
- `/api/investment` - эндпоинт для инвестиционного консалтинга

### Веб-интерфейс

Веб-интерфейс построен на основе Bootstrap и JavaScript и предоставляет пользователю возможность:

- Выбрать область консалтинга
- Задать вопрос
- Получить ответ с рекомендациями
- Просмотреть источники данных

## Установка и развертывание

### Требования

- Docker и Docker Compose
- 4 ГБ оперативной памяти (минимум)
- 10 ГБ свободного места на диске

### Установка с использованием Docker

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-username/ai-business-consultant.git
   cd ai-business-consultant
   ```

2. Запустите контейнеры с помощью Docker Compose:
   ```bash
   docker-compose up -d
   ```

3. Проверьте, что контейнеры запущены:
   ```bash
   docker-compose ps
   ```

4. Откройте веб-интерфейс в браузере:
   ```
   http://localhost:8000
   ```

### Установка без Docker

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-username/ai-business-consultant.git
   cd ai-business-consultant
   ```

2. Создайте виртуальное окружение и установите зависимости:
   ```bash
   python -m venv venv
   source venv/bin/activate  # для Linux/Mac
   # или
   venv\Scripts\activate  # для Windows
   pip install -r requirements.txt
   ```

3. Запустите приложение:
   ```bash
   python web_app.py
   ```

4. Откройте веб-интерфейс в браузере:
   ```
   http://localhost:8000
   ```

## API документация

### Общий формат запроса

```json
{
  "query": "Как оптимизировать налогообложение для малого бизнеса?",
  "domain": "financial",
  "parameters": {}
}
```

### Общий формат ответа

```json
{
  "result": {
    "analysis": "Для оптимизации налогообложения малого бизнеса рекомендуется рассмотреть возможность перехода на упрощенную систему налогообложения и использование налоговых льгот для инновационных предприятий.",
    "confidence": 0.92,
    "domain": "financial",
    "query": "Как оптимизировать налогообложение для малого бизнеса?",
    "processing_time": 0.15
  },
  "recommendations": [
    "Рекомендация 1",
    "Рекомендация 2",
    "Рекомендация 3"
  ],
  "data_sources": [
    "https://example.com/reference1",
    "https://example.com/reference2"
  ],
  "timestamp": "2025-03-27T19:30:00.000Z"
}
```

### Эндпоинты

#### Общий эндпоинт для консалтинга

**URL**: `/api/consulting`  
**Метод**: POST  
**Описание**: Общий эндпоинт для получения консультации в любой области.

#### Финансовый консалтинг

**URL**: `/api/financial`  
**Метод**: POST  
**Описание**: Эндпоинт для финансового консалтинга.

#### Операционный консалтинг

**URL**: `/api/operations`  
**Метод**: POST  
**Описание**: Эндпоинт для операционного консалтинга.

#### Управленческий консалтинг

**URL**: `/api/management`  
**Метод**: POST  
**Описание**: Эндпоинт для управленческого консалтинга.

#### IT-консалтинг

**URL**: `/api/it`  
**Метод**: POST  
**Описание**: Эндпоинт для IT-консалтинга.

#### HR-консалтинг

**URL**: `/api/hr`  
**Метод**: POST  
**Описание**: Эндпоинт для HR-консалтинга.

#### Инвестиционный консалтинг

**URL**: `/api/investment`  
**Метод**: POST  
**Описание**: Эндпоинт для инвестиционного консалтинга.

## Пользовательский интерфейс

Пользовательский интерфейс представляет собой веб-приложение, доступное по адресу `http://localhost:8000`. Интерфейс позволяет:

1. Выбрать область консалтинга
2. Задать вопрос
3. Получить ответ с рекомендациями
4. Просмотреть источники данных

### Основные элементы интерфейса

- **Карточки областей консалтинга** - для выбора области консалтинга
- **Форма запроса** - для ввода вопроса
- **Блок с ответом** - для отображения ответа и рекомендаций
- **Блок с источниками данных** - для отображения источников данных

## Модель ИИ

### Архитектура модели

Модель ИИ построена на основе трансформерной архитектуры и использует предобученную модель DeepPavlov/rubert-base-cased в качестве базовой модели. Для специализации в различных областях консалтинга используются доменные адаптеры.

### Обучение модели

Модель обучена на данных из различных источников, включая:
- Data.gov
- EU OPEN DATA Portal
- Quandl
- Kaggle Datasets
- FifthRow Datasets
- Data USA

Для обучения использовались техники transfer learning, triplet loss и student-teacher learning.

### Доменные адаптеры

Для каждой области консалтинга создан отдельный доменный адаптер, который специализирует базовую модель для конкретной области. Адаптеры хранятся в директории `/app/model/adapters`.

## Обслуживание и мониторинг

### Мониторинг

Система использует Prometheus для сбора метрик и мониторинга производительности. Основные метрики:

- `model_inference_time` - время инференса модели
- `embedding_generation_time` - время генерации эмбеддингов
- `cache_hit_ratio` - соотношение попаданий в кэш
- `business_consultant_request_count` - количество запросов к API
- `business_consultant_request_latency_seconds` - время обработки запросов к API

### Логирование

Система использует стандартный модуль logging для логирования. Логи доступны в консоли контейнера:

```bash
docker-compose logs -f ai-business-consultant
```

### Обновление модели

Для обновления модели необходимо:

1. Остановить контейнеры:
   ```bash
   docker-compose down
   ```

2. Обновить файлы модели в директории `/app/model`

3. Запустить контейнеры:
   ```bash
   docker-compose up -d
   ```

## Устранение неполадок

### Проблема: Контейнер не запускается

**Решение**:
1. Проверьте логи контейнера:
   ```bash
   docker-compose logs ai-business-consultant
   ```
2. Убедитесь, что у вас достаточно оперативной памяти и места на диске.
3. Проверьте, что порт 8000 не занят другим приложением.

### Проблема: Модель не отвечает на запросы

**Решение**:
1. Проверьте логи контейнера на наличие ошибок.
2. Убедитесь, что файлы модели корректно загружены.
3. Перезапустите контейнер:
   ```bash
   docker-compose restart ai-business-consultant
   ```

### Проблема: Веб-интерфейс не отображается

**Решение**:
1. Убедитесь, что контейнер запущен.
2. Проверьте, что вы используете правильный URL (http://localhost:8000).
3. Проверьте логи контейнера на наличие ошибок.

## Часто задаваемые вопросы

### Какие языки поддерживает модель?

В настоящее время модель поддерживает только русский язык.

### Можно ли использовать модель без Docker?

Да, можно установить и запустить модель без Docker, следуя инструкциям в разделе "Установка без Docker".

### Как добавить новую область консалтинга?

Для добавления новой области консалтинга необходимо:
1. Создать новый доменный адаптер.
2. Добавить новый эндпоинт в API.
3. Обновить пользовательский интерфейс.

### Как обновить модель?

Инструкции по обновлению модели приведены в разделе "Обновление модели".

### Какие требования к оборудованию?

Минимальные требования:
- 4 ГБ оперативной памяти
- 10 ГБ свободного места на диске

Рекомендуемые требования:
- 8 ГБ оперативной памяти
- 20 ГБ свободного места на диске
- GPU с поддержкой CUDA (для ускорения инференса)
